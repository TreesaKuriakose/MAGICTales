<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reset Password - MagicTales</title>
    <style>
        :root { --bg-gradient: linear-gradient(135deg, #101820, #16222a, #0f2027); --text-color: #fff; }
        html, body { height: 100%; margin: 0; padding: 0; overflow: auto; }
        body { width: 100vw; min-height: 100vh; background: var(--bg-gradient); display: flex; align-items: center; justify-content: center; color: var(--text-color); }
        #animation-bg { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; }
        .container { position: relative; z-index: 1; max-width: 460px; width: 100%; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); border-radius: 15px; padding: 2rem; }
        h1 { text-align: center; color: #00c6ff; margin-top: 0; text-shadow: 0 0 20px #00c6ff; }
        label { display:block; margin-bottom: 0.5rem; color:#00c6ff; }
        input[type="password"] { width:100%; padding:12px; border:2px solid rgba(0,198,255,0.3); border-radius:8px; background:rgba(255,255,255,0.1); color:#fff; }
        .btn { width:100%; padding:12px; margin-top:1rem; background:#00c6ff; color:#fff; border:none; border-radius:8px; font-weight:600; cursor:pointer; }
        .btn:hover { background:#0072ff; }
        .error { background: rgba(255, 107, 107, 0.2); color:#ff6b6b; padding:10px; border-left:4px solid #ff6b6b; border-radius:5px; margin-bottom:1rem; }
        .message { background: rgba(40, 167, 69, 0.2); color:#28a745; padding:10px; border-left:4px solid #28a745; border-radius:5px; margin-bottom:1rem; }
        .links { text-align:center; margin-top:1rem; }
        .links a { color:#00c6ff; text-decoration:none; }
    </style>
</head>
<body>
    <canvas id="animation-bg"></canvas>
    <div class="container">
        <h1>Reset Password</h1>
        {% if error %}<div class="error">{{ error }}</div>{% endif %}
        {% if message %}<div class="message">{{ message }}</div>{% endif %}
        <form method="POST">
            <label for="password">New Password</label>
            <input type="password" id="password" name="password" placeholder="New strong password" required>
            <div style="font-size: 0.85rem; opacity: 0.85; margin-top: 6px;">
                Must be 8+ characters and include upper, lower, number, and special.
            </div>
            <button class="btn" type="submit">Update Password</button>
        </form>
        <div class="links">
            <a href="{{ url_for('login') }}">‚Üê Back to Login</a>
        </div>
    </div>
    <script>
    const canvas = document.getElementById('animation-bg');
    const ctx = canvas.getContext('2d');
    let width = window.innerWidth, height = window.innerHeight; canvas.width = width; canvas.height = height;
    let particles = []; const numParticles = 80;
    function rc(){const c=['#00c6ff','#0072ff','#fff','#2c5364'];return c[Math.floor(Math.random()*c.length)];}
    function create(){particles=[];for(let i=0;i<numParticles;i++){particles.push({x:Math.random()*width,y:Math.random()*height,r:Math.random()*2+1,dx:(Math.random()-0.5)*0.7,dy:(Math.random()-0.5)*0.7,color:rc()});}}
    function draw(){ctx.clearRect(0,0,width,height);for(const p of particles){ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,2*Math.PI);ctx.fillStyle=p.color;ctx.globalAlpha=0.7;ctx.fill();ctx.globalAlpha=1;p.x+=p.dx;p.y+=p.dy;if(p.x<0||p.x>width)p.dx*=-1;if(p.y<0||p.y>height)p.dy*=-1;}requestAnimationFrame(draw);}
    window.addEventListener('resize',()=>{width=window.innerWidth;height=window.innerHeight;canvas.width=width;canvas.height=height;create();});
    create(); draw();
    </script>
</body>
</html>
